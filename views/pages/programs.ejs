<%- include('../partials/header') %>

    <main class="main" id="main">

        <div class="container">

            <nav class="nav justify-content-center">

                <a href="/" class="nav-link">Home</a>

                <a href="/program-create" class="nav-link">Program Form</a>

                <a href="/fun-facts" class="nav-link">Fun Facts</a>

            </nav>

        </div>

        <div class="container program-grid">

            <div class="row row-cols-2 row-cols-md-2 row-cols-lg-5 g-3" id="programRow">

                <% programs.forEach(program => { %>
                    
                    <div class="col">
                        
                        <div class="card h-100" id="programCard">

                            <a href="/program/<%= program.program_id %>" class="single-program-link">
    
                                <img src="/images/<%= program.img_url %>" id="programPoster" alt="<%= program.title %> poster" class="img-fluid card-img-top">
                                
                            </a>
                                <div class="card-body details">
    
                                    <h2 class="card-title" id="programTitle">
                                        <%= program.title %>
                                    </h2>
    
                                    <p class="card-text" id="yearReleased">
                                        Year Released: <%= program.yr_released %>
                                    </p>
    
                                    <p class="card-text programSummary" data-id="<%= program.program_id%>">
                                        Summary: <%= program.summary %>
                                    </p>

                                    <button type="button" class="btn btn-danger read-more-btn" data-id="<%= program.program_id %>">Read More</button>
    
                                    <p class="card-text" id="programRating">
                                        Rating: <%= program.program_rating %>
                                    </p>
    
                                    <p class="card-text" id="robinsRating">
                                        Robin's Rating: <%= program.robins_rating %>
                                    </p>
    
                                </div>
    
                                <div class="card-footer">
        
                                    <p class="text-body-secondary">
                                        <a href="https://www.imdb.com/title/<%= program.IMDb_id %>" 
                                            class="btn btn-primary"
                                            target="_blank"
                                            id="imdbLink"
                                            rel="noopener noreferrer">
        
                                            IMDb
        
                                        </a>
        
                                        <a href="<%= program.wikipedia_url %>" 
                                            class="btn btn-primary"
                                            target="_blank"
                                            id="wikiUrl"
                                            rel="noopener noreferrer">
        
                                            Wikipedia
                                        
                                        </a>
                                    </p>
                                </div>
                                
                            </div>
                            
                        
                    </div>
                <% }) %>

            </div>
        </div>

        <!-- pagination controls -->

    <div class="pagination">

        <% if (pagination.hasPrevPage) { %>

            <a href="/programs?page= <%= pagination.currentPage - 1 %>"> ← Prev </a>

        <% } %>

        <span>Page <%= pagination.currentPage %> of <%= pagination.totalPages %></span>

        <% if (pagination.hasNextPage) { %>
         
            <a href="/programs?page= <%= pagination.currentPage + 1 %>"> Next → </a>

        <% } %>

    </div>

    </main>

<%- include('../partials/footer') %>